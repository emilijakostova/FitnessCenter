@model FitnessCenter.Models.Exercise

@{
    ViewBag.Title = "Избриши";
}

<h2>Избриши</h2>

<h3>Дали сте сигурни дека сакате да ја отстраните оваа вежба?</h3>
<div>
    <h4>Вежба</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt><label for="MuscleGroup">Мускулна група</label></dt>

        <dd>
            @Html.DisplayFor(model => model.MuscleGroup)
        </dd>

        <dt><label for="Description"></label>Опис</dt>

        <dd>
            @Html.DisplayFor(model => model.Description)
        </dd>

        <dt>
            <label for="MediaUrl">URL-адреса (youtube video link)</label>
        </dt>

        <dd>
            <td>
                @{
                    var videoUrl = Model.MediaUrl;
                    var videoId = "";
                    if (!string.IsNullOrEmpty(videoUrl))
                    {
                        var uri = new Uri(videoUrl);
                        var query = System.Web.HttpUtility.ParseQueryString(uri.Query);
                        videoId = query["v"];
                    }
                    var thumbnailUrl = "https://img.youtube.com/vi/" + videoId + "/0.jpg";
                }
                @if (!string.IsNullOrEmpty(videoId))
                {
                    <a href="@videoUrl" target="_blank">
                        <img src="@thumbnailUrl" alt="Video thumnail" class="img-thumbnail" style="width:300px; height:210px" />
                    </a>
                }

            </td>
        </dd>

    </dl>

    @using (Html.BeginForm()) {
        @Html.AntiForgeryToken()

        <div class="form-actions no-color">
            <input type="submit" value="Избриши" class="btn btn-danger me-3" />
            @Html.ActionLink("Назад до листата", "Index", null, new { @class = "btn btn-light border-dark" })
        </div>
    }
</div>
